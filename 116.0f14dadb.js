"use strict";(self.webpackChunkwebpack_project=self.webpackChunkwebpack_project||[]).push([[116],{116:(e,t,r)=>{function n(e,t){e.forEach(t)}function o(e,t,r){if(!e)throw Error(`${r?r+": ":""}${t}`)}function a({node:e=[],from:t,source:r,parent:o=t||r,to:a,target:i,child:s=a||i,scope:c={},meta:l={},family:f={type:"regular"},regional:d}={}){const u=K(o),p=K(f.links),m=K(f.owners),h=[];n(e,(e=>e&&T(h,e)));const g={id:F(),seq:h,next:K(s),meta:l,scope:c,family:{type:f.type||"crosslink",links:p,owners:m}};return n(p,(e=>T(y(e),g))),n(m,(e=>T(b(e),g))),n(u,(e=>T(e.next,g))),d&&B&&J(w(B),[g]),g}function i(e,t,r){let o,a=Ae,i=null,s=ze;if(e.target&&(t=e.params,r=e.defer,o=e.meta,a="page"in e?e.page:a,e.stack&&(i=e.stack),s=x(e)||s,e=e.target),s&&ze&&s!==ze&&(ze=null),Array.isArray(e))for(let r=0;r<e.length;r++)we("pure",a,v(e[r]),i,t[r],s,o);else we("pure",a,v(e),i,t,s,o);if(r&&!Ne)return;const c={isRoot:Ne,currentPage:Ae,scope:ze,isWatch:Me,isPure:Re};let l,f,d,u,p,m;Ne=0;e:for(;u=ke();){const{idx:e,stack:t,type:r}=u;d=t.node,Ae=p=t.page,ze=x(t),p?m=p.reg:ze&&(m=ze.reg);const o=!!p,a=!!ze,i={fail:0,scope:d.scope};l=f=0;for(let n=e;n<d.seq.length&&!l;n++){const s=d.seq[n];if(s.order){const{priority:o,barrierID:a}=s.order,i=a?p?`${p.fullID}_${a}`:a:0;if(n!==e||r!==o){a?xe.has(i)||(xe.add(i),$e(n,t,o,a)):$e(n,t,o,0);continue e}a&&xe.delete(i)}switch(s.type){case"mov":{const e=s.data;let r;switch(e.from){case"stack":r=w(t);break;case"a":case"b":r=t[e.from];break;case"value":r=e.store;break;case"store":if(m&&!m[e.store.id])if(o){const r=_e(p,e.store.id);t.page=p=r,r?m=r.reg:a?(Ee(ze,e.store,0,1,e.softRead),m=ze.reg):m=void 0}else a&&Ee(ze,e.store,0,1,e.softRead);r=me(m&&m[e.store.id]||e.store)}switch(e.to){case"stack":t.value=r;break;case"a":case"b":t[e.to]=r;break;case"store":Oe(p,ze,e.target,0).current=r}break}case"compute":const e=s.data;if(e.fn){Me="watch"===d.meta.op,Re=e.pure;const r=e.safe?(0,e.fn)(w(t),i.scope,t):Te(i,e.fn,t);e.filter?f=!r:t.value=r,Me=c.isWatch,Re=c.isPure}}l=i.fail||f}if(Pe&&Pe(t,i),!l){const e=w(t),r=x(t);if(n(d.next,(n=>{we("child",p,n,t,e,r)})),r){d.meta.needFxCounter&&we("child",p,r.fxCount,t,e,r),d.meta.storeChange&&we("child",p,r.storeChange,t,e,r),d.meta.warnSerialize&&we("child",p,r.warnSerializeNode,t,e,r);const o=r.additionalLinks[d.id];o&&n(o,(n=>{we("child",p,n,t,e,r)}))}}}Ne=c.isRoot,Ae=c.currentPage,ze=x(c)}function s(e,t){if(!t)return e;if(!t.name&&!t.named&&!t.loc)return e;let r=`[${e}]`;const n=t.named||t.name;n&&(r+=` unit '${n}'`);const o=t.loc;return!n&&o&&(r+=` (${o.file}:${o.line}:${o.column})`),r}function c(e){const t=()=>e();return t.unsubscribe=()=>e(),t}function l(e,...t){const r=G();if(r){const n=r.handlers[e];if(n)return n(r,...t)}}function f(e,t){const r=Ve({or:t,and:"string"==typeof e?{name:e}:e}),n=s("event",r),c=(e,...t)=>(o(!z(c,"derived"),"call of derived event is not supported, use createEvent instead",n),o(!Re,"unit call from pure function is not supported, use operators like sample instead",n),Ae?((e,t,r,n)=>{const o=Ae;let a=null;if(t)for(a=Ae;a&&a.template!==t;)a=S(a);Ie(a);const i=e.create(r,n);return Ie(o),i})(c,d,e,t):c.create(e,t)),d=G(),u=Object.assign(c,{graphite:a({meta:Je(r.actualOp||"event",c,r),regional:1}),create:e=>(i({target:c,params:e,scope:ze}),e),watch:e=>Ge(c,e),map:e=>Ke(c,"map",e,[de()]),filter:e=>Ke(c,"filter",e.fn?e:e.fn,[de(ne,1)]),filterMap:e=>Ke(c,"filterMap",e,[de(),le((e=>!X(e)),1)]),prepend(e){o(c.targetable,".prepend of derived event is not supported, call source event instead",n);const t=f("* → "+c.shortName,{parent:S(c)});return l("eventPrepend",v(t)),Le(t,c,[de()],"prepend",e),He(c,t),t}});return null!=r&&r.domain&&r.domain.hooks.event(u),N(u,"id",u.graphite.id),L(u.graphite),u}function d(e,t,r,a,i){return ee(r,`${i} ${t}`,"first argument"),o(U(a),"second argument should be a function",i),V(!z(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`,i),n(Array.isArray(r)?r:[r],(t=>{e.off(t),$(e).set(t,Be(Ue(t,e,"on",re,a)))})),e}function u(e,t){const r=Ve(t),c=pe(e),p=s("store",r),m=f({named:"updates",derived:1});l("storeBase",c);const h=c.id,g="skipVoid"in r,v=g&&!r.skipVoid;V(!(g&&r.skipVoid),"{skipVoid: true}","updateFilter",p);const y={subscribers:new Map,updates:m,defaultState:e,stateRef:c,getState(){let e,t=c;if(Ae){let t=Ae;for(;t&&!t.reg[h];)t=S(t);t&&(e=t)}return!e&&ze&&(Ee(ze,c,1),e=ze),e&&(t=e.reg[h]),me(t)},setState:e=>i({target:y,params:e,defer:1,scope:ze}),reset:(...e)=>(o(y.targetable,".reset of derived store is not supported",p),n(e,(e=>d(y,".reset",e,(()=>y.defaultState),p))),y),on:(e,t)=>(o(y.targetable,".on of derived store is not supported",p),d(y,".on",e,t,p)),off(e){const t=$(y).get(e);return t&&(t(),$(y).delete(e)),y},map(e,t){let r,n;Q(e)&&(r=e,e=e.fn);const o=y.getState(),a=X(o);G()?n=null:(!a||a&&v)&&(n=e(o));const i=u(n,{name:`${y.shortName} → *`,derived:1,...t,and:r}),s=Ue(y,i,"map",ne,e);return he(k(i),{type:"map",fn:e,from:c}),k(i).noInit=1,l("storeMap",c,s),i},watch(e,t){if(V(!t,"watch second argument","sample",p),!t||!R(e)){const t=Ge(y,e);return l("storeWatch",c,e)||e(y.getState()),t}return o(U(t),"second argument should be a function",p),e.watch((e=>t(y.getState(),e)))}},b=Je("store",y,r),w=y.defaultConfig.updateFilter;y.graphite=a({scope:{state:c,fn:w},node:[le(((e,t,r)=>(r.scope&&!r.scope.reg[c.id]&&(r.b=1),e))),fe(c),le(((e,t,{a:r,b:n})=>{const o=X(e);return o&&!g&&console.error(`${p}: ${Qe}`),(o&&v||!o)&&(e!==r||n)}),1),w&&de(te,1),ie({from:"stack",target:c})],child:m,meta:{...b,defaultState:e},regional:1}),N(y,"id",y.graphite.id),N(y,"rootStateRefId",h);const x=z(y,"serialize"),M=z(y,"derived"),A="ignore"===x,C=z(y,"sid");C&&(N(y,"storeChange",1),c.sid=C),C||A||M||N(y,"warnSerialize",1);const I=X(e);return o(M||!I||I&&v,Qe,p),M&&I&&!g&&console.error(`${p}: ${Qe}`),J(y,[m]),null!=r&&r.domain&&r.domain.hooks.store(y),M||(y.reinit=f({named:"reinit"}),y.reset(y.reinit)),c.meta=y.graphite.meta,L(y.graphite),y}function p(e,{scope:t,safe:r}={}){o(t||ze||r,"scopeBind: scope not found");const n=t||ze;return t=>{function r(){Ce(i)}let o,a=0;const i=ze;Ce(n);try{o=e(t)}catch(e){o=e,a=1}if(r(),a)throw o;return o instanceof Promise&&o.then(r,r),o}}function m({unit:e,fn:t,scope:r,batch:n}){const o=[ue.run({fn:e=>t(e)})];n&&o.unshift(ue.compute({priority:"sampler",batch:1})),C(e)&&o.unshift(ue.mov({store:e.stateRef,to:"stack"}));const i=Array.isArray(e)?e:[e];if(r){const e=[],t=r.additionalLinks;return i.forEach((r=>{const n=t[r.graphite.id]||[];t[r.graphite.id]=n;const i=a({node:h(o,r),meta:{watchOp:r.kind}});n.push(i),e.push((()=>{const e=n.indexOf(i);-1!==e&&n.splice(e,1),Fe(i)}))})),c((()=>{e.forEach((e=>e()))}))}{const e=a({node:o,parent:i,family:{owners:i}});return c((()=>{Fe(e)}))}}function h(e,t){return C(t)?[ue.mov({store:t.stateRef,to:"stack"}),...e]:e}r.d(t,{MT:()=>u,WC:()=>p,bv:()=>m,is:()=>j,yM:()=>f});const g="undefined"!=typeof Symbol&&Symbol.observable||"@@observable",v=e=>e.graphite||e,y=e=>e.family.owners,b=e=>e.family.links,k=e=>e.stateRef,w=e=>e.value,$=e=>e.subscribers,S=e=>e.parent,x=e=>e.scope,z=(e,t)=>v(e).meta[t],N=(e,t,r)=>v(e).meta[t]=r,M=e=>e.compositeName,R=e=>(U(e)||Q(e))&&"kind"in e,A=e=>t=>R(t)&&t.kind===e,C=A("store"),I=A("event"),_=A("effect"),O=A("domain"),P=A("scope");var j={__proto__:null,unit:R,store:C,event:I,effect:_,targetable:e=>R(e)&&!!e.targetable,domain:O,scope:P,attached:e=>_(e)&&1==z(e,"attached")};const E=(e,t)=>{const r=e.indexOf(t);-1!==r&&e.splice(r,1)},T=(e,t)=>e.push(t),V=(e,t,r,n)=>!e&&console.error(`${n?n+": ":""}${t} is deprecated${r?`, use ${r} instead`:""}`),q=()=>{let e=0;return()=>""+ ++e},W=q(),D=q(),F=q();q();let B=null;const L=e=>{},G=()=>B&&B.template,H=e=>(e&&B&&B.sidRoot&&(e=`${B.sidRoot}|${e}`),e),J=(e,t)=>{const r=v(e);n(t,(e=>{const t=v(e);"domain"!==r.family.type&&(t.family.type="crosslink"),T(y(t),r),T(b(r),t)}))},K=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(v),Q=e=>"object"==typeof e&&null!==e,U=e=>"function"==typeof e,X=e=>void 0===e,Y=e=>o(Q(e)||U(e),"expect first argument be an object"),Z=(e,t,r,n)=>o(!(!Q(e)&&!U(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${r} to be a unit (store, event or effect)${n}`),ee=(e,t,r)=>{Array.isArray(e)?n(e,((e,n)=>Z(e,t,`${n} item of ${r}`,""))):Z(e,t,r," or array of units")},te=(e,{fn:t},{a:r})=>t(e,r),re=(e,{fn:t},{a:r})=>t(r,e),ne=(e,{fn:t})=>t(e),oe=(e,t,r,n)=>{const o={id:D(),type:e,data:t};return r&&(o.order={priority:r},n&&(o.order.barrierID=++ae)),o};let ae=0;const ie=({from:e="store",store:t,target:r,to:n=(r?"store":"stack"),batch:o,priority:a})=>oe("mov",{from:e,store:t,to:n,target:r},a,o),se=({fn:e,batch:t,priority:r,safe:n=0,filter:o=0,pure:a=0})=>oe("compute",{fn:e,safe:n,filter:o,pure:a},r,t),ce=({fn:e})=>se({fn:e,priority:"effect"}),le=(e,t,r)=>se({fn:e,safe:1,filter:t,priority:r&&"effect"}),fe=(e,t,r)=>ie({store:e,to:t?"stack":"a",priority:r&&"sampler",batch:1}),de=(e=ne,t)=>se({fn:e,pure:1,filter:t}),ue={mov:ie,compute:se,filter:({fn:e,pure:t})=>se({fn:e,filter:1,pure:t}),run:ce},pe=e=>({id:D(),current:e,initial:e}),me=({current:e})=>e,he=(e,t)=>{e.before||(e.before=[]),T(e.before,t)};let ge=null;const ve=(e,t)=>{if(!e)return t;if(!t)return e;let r;return(e.v.type===t.v.type&&e.v.id>t.v.id||Se(e.v.type)>Se(t.v.type))&&(r=e,e=t,t=r),r=ve(e.r,t),e.r=e.l,e.l=r,e},ye=[];let be=0;for(;be<6;)T(ye,{first:null,last:null,size:0}),be+=1;const ke=()=>{for(let e=0;e<6;e++){const t=ye[e];if(t.size>0){if(3===e||4===e){t.size-=1;const e=ge.v;return ge=ve(ge.l,ge.r),e}1===t.size&&(t.last=null);const r=t.first;return t.first=r.r,t.size-=1,r.v}}},we=(e,t,r,n,o,a,i)=>$e(0,{a:null,b:null,node:r,parent:n,value:o,page:t,scope:a,meta:i},e,0),$e=(e,t,r,n)=>{const o=Se(r),a=ye[o],i={v:{idx:e,stack:t,type:r,id:n},l:null,r:null};3===o||4===o?ge=ve(ge,i):(0===a.size?a.first=i:a.last.r=i,a.last=i),a.size+=1},Se=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},xe=new Set;let ze,Ne=1,Me=0,Re=0,Ae=null;const Ce=e=>{ze=e},Ie=e=>{Ae=e},_e=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=e.parent;if(e)return e}return null},Oe=(e,t,r,n)=>{const o=_e(e,r.id);return o?o.reg[r.id]:t?(Ee(t,r,n),t.reg[r.id]):r};let Pe;const je=e=>e,Ee=(e,t,r,o,a)=>{const i=e.reg;if(i[t.id])return;const s=t.sid,c={id:t.id,current:t.initial,meta:t.meta};if(c.id in e.values.idMap)c.current=e.values.idMap[c.id];else if(s&&s in e.values.sidMap&&!(s in e.sidIdMap)){var l;const r=null==t||null===(l=t.meta)||void 0===l?void 0:l.serialize;c.current=(e.fromSerialize&&"ignore"!==r&&(null==r?void 0:r.read)||je)(e.values.sidMap[s])}else if(t.before&&!a){let a=0;const s=r||!t.noInit||o;n(t.before,(t=>{switch(t.type){case"map":{const n=t.from;if((n||t.fn)&&(n&&Ee(e,n,r,o),s)){const e=n&&i[n.id].current;c.current=t.fn?t.fn(e):e}break}case"field":Ee(e,t.from,r,o),a||(a=1,c.current=Array.isArray(c.current)?[...c.current]:{...c.current}),s&&(c.current[t.field]=i[i[t.from.id].id].current)}}))}s&&(e.sidIdMap[s]=t.id),i[t.id]=c},Te=(e,t,r)=>{try{return t(w(r),e.scope,r)}catch(t){console.error(t),e.fail=1,e.failReason=t}},Ve=(e,t={})=>(Q(e)&&(Ve(e.or,t),function(e,t){for(const r in e)t(e[r],r)}(e,((e,r)=>{X(e)||"or"===r||"and"===r||(t[r]=e)})),Ve(e.and,t)),t),qe=(e,t)=>{E(e.next,t),E(y(e),t),E(b(e),t)},We=(e,t,r)=>{let n;e.next.length=0,e.seq.length=0,e.scope=null;let o=b(e);for(;n=o.pop();)qe(n,e),(t||r&&"sample"!==e.meta.op||"crosslink"===n.family.type)&&We(n,t,"on"!==n.meta.op&&r);for(o=y(e);n=o.pop();)qe(n,e),r&&"crosslink"===n.family.type&&We(n,t,"on"!==n.meta.op&&r)},De=e=>e.clear(),Fe=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),C(e))De($(e));else if(O(e)){r=1;const t=e.history;De(t.events),De(t.effects),De(t.stores),De(t.domains)}We(v(e),!!t,r)},Be=e=>c((()=>Fe(e))),Le=(e,t,r,n,o)=>a({node:r,parent:e,child:t,scope:{fn:o},meta:{op:n},family:{owners:[e,t],links:t},regional:1}),Ge=(e,t)=>(o(U(t),".watch argument should be a function"),Be(a({scope:{fn:t},node:[ce({fn:ne})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),He=(e,t,r="event")=>{S(e)&&S(e).hooks[r](t)},Je=(e,t,r)=>{const n=Ve(r),o="domain"===e,a=W(),{sid:i=null,named:s=null,domain:c=null,parent:l=c}=n,f=s||n.name||(o?"":a),d=function(e,t){let r,n;const o=e;if(t){const o=M(t);0===e.length?(r=o.path,n=o.fullName):(r=o.path.concat([e]),n=0===o.fullName.length?e:o.fullName+"/"+e)}else r=0===e.length?[]:[e],n=e;return{shortName:o,fullName:n,path:r}}(f,l),u={op:t.kind=e,name:t.shortName=f,sid:t.sid=H(i),named:s,unitId:t.id=a,serialize:n.serialize,derived:n.derived,config:n};if(t.targetable=!n.derived,t.parent=l,t.compositeName=d,t.defaultConfig=n,t.getType=()=>(V(0,"getType","compositeName.fullName"),d.fullName),!o){t.subscribe=e=>(Y(e),t.watch(U(e)?e:t=>e.next&&e.next(t))),t[g]=()=>t;const e=G();e&&(u.nativeTemplate=e)}return u},Ke=(e,t,r,n)=>{let o;Q(r)&&(o=r,r=r.fn);const a=f({name:`${e.shortName} → *`,derived:1,and:o});return Le(e,a,n,t,r),a},Qe="undefined is used to skip updates. To allow undefined as a value provide explicit { skipVoid: false } option",Ue=(e,t,r,n,o)=>{const a=k(t),i=ie({store:a,to:"a",priority:"read"});"map"===r&&(i.data.softRead=1);const s=[i,de(n)];return l("storeOnMap",a,s,C(e)&&k(e)),Le(e,t,s,r,o)};a({node:[ce({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}})}}]);